<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î–∞—à–±–æ—Ä–¥ - –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</title>
    <link rel="icon" type="image/png" href="/static/images/logo.png">
    <link rel="shortcut icon" type="image/png" href="/static/images/logo.png">
    <link rel="stylesheet" href="/static/loading.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .header-brand {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .header-logo {
            width: 50px;
            height: 50px;
            object-fit: contain;
            filter: drop-shadow(0 5px 15px rgba(0, 0, 0, 0.2));
            animation: pulseLogo 3s ease-in-out infinite;
        }
        
        @keyframes pulseLogo {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.05); opacity: 0.95; }
        }
        
        .header-title h1 {
            font-size: 2em;
            margin: 0;
        }
        
        .header h1 {
            font-size: 2em;
            margin: 0;
        }
        
        .header-actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .btn {
            border: none;
            padding: 10px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9em;
            text-decoration: none;
            display: inline-block;
        }
        
        .btn-primary { background: rgba(255,255,255,0.2); color: white; }
        .btn-primary:hover { background: rgba(255,255,255,0.3); }
        .btn-muted { background: #e9ecef; color: #333; }
        .btn-muted:hover { background: #dee2e6; }
        
        .content {
            padding: 30px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 24px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .stat-card h3 {
            font-size: 2.5em;
            margin-bottom: 8px;
            font-weight: 700;
        }
        
        .stat-card p {
            opacity: 0.9;
            font-size: 0.95em;
        }
        
        .stat-card.secondary {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }
        
        .stat-card.success {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }
        
        .stat-card.warning {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
        }
        
        .section {
            margin-bottom: 30px;
        }
        
        .section-title {
            font-size: 1.5em;
            margin-bottom: 20px;
            color: #333;
            font-weight: 600;
        }
        
        .period-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .period-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }
        
        .period-card h4 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 1.1em;
        }
        
        .period-card .value {
            font-size: 1.8em;
            font-weight: 700;
            color: #333;
            margin-bottom: 5px;
        }
        
        .period-card .label {
            color: #666;
            font-size: 0.9em;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        thead {
            background: #667eea;
            color: white;
        }
        
        th {
            padding: 15px;
            text-align: left;
            font-weight: 600;
            font-size: 0.9em;
        }
        
        td {
            padding: 12px 15px;
            border-bottom: 1px solid #e9ecef;
        }
        
        tbody tr:hover {
            background: #f8f9fa;
        }
        
        .badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: 600;
        }
        
        .badge-success { background: #d4edda; color: #155724; }
        .badge-warning { background: #fff3cd; color: #856404; }
        .badge-danger { background: #f8d7da; color: #721c24; }
        .badge-info { background: #d1ecf1; color: #0c5460; }
        
        .alert-banner {
            padding: 12px 16px;
            border-radius: 8px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .alert-banner.warning {
            background: #fff3cd;
            color: #856404;
            border-left: 4px solid #ffc107;
        }
        
        .alert-banner.danger {
            background: #f8d7da;
            color: #721c24;
            border-left: 4px solid #dc3545;
        }
        
        .alert-banner.info {
            background: #d1ecf1;
            color: #0c5460;
            border-left: 4px solid #17a2b8;
        }
        
        .two-columns {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 30px;
        }
        
        .notifications-bell {
            position: relative;
            cursor: pointer;
            padding: 8px;
            border-radius: 8px;
            transition: background 0.2s;
            font-size: 1.2em;
        }
        
        .notifications-bell:hover {
            background: rgba(255,255,255,0.2);
        }
        
        .chart-container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            margin-bottom: 20px;
        }
        
        .chart-container h3 {
            margin-bottom: 15px;
            color: #333;
            font-size: 1.2em;
        }
        
        .chart-container canvas {
            max-height: 300px !important;
        }
        
        .notifications-badge {
            position: absolute;
            top: 0;
            right: 0;
            background: #dc3545;
            color: white;
            border-radius: 10px;
            padding: 2px 6px;
            font-size: 0.7em;
            font-weight: 700;
            min-width: 18px;
            text-align: center;
        }
        
        .notification-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.35);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 3000;
        }
        
        .notification-overlay.show {
            display: flex;
        }
        
        .notification-modal {
            background: white;
            border-radius: 12px;
            padding: 24px;
            width: min(600px, 90vw);
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 10px 40px rgba(0,0,0,0.25);
        }
        
        .notification-item {
            padding: 12px;
            border-left: 4px solid #667eea;
            margin-bottom: 10px;
            background: #f8f9fa;
            border-radius: 6px;
        }
        
        .notification-item.success {
            border-left-color: #28a745;
        }
        
        .notification-item.warning {
            border-left-color: #ffc107;
        }
        
        .notification-item.danger {
            border-left-color: #dc3545;
        }
        
        .notification-item.info {
            border-left-color: #17a2b8;
        }
        
        .chart-container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            margin-bottom: 20px;
        }
        
        .chart-container h3 {
            margin-bottom: 15px;
            color: #333;
            font-size: 1.2em;
        }
        
        @media (max-width: 768px) {
            .two-columns {
                grid-template-columns: 1fr;
            }
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã) -->
    <div class="loading-overlay show" id="loading-overlay">
        <div style="text-align: center;">
            <div class="loading-spinner"></div>
            <div class="loading-text">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        </div>
    </div>
    
    <div class="container">
        <div class="header">
            <div class="header-brand">
                <img src="/static/images/logo.png" alt="fioreVPN" class="header-logo" onerror="this.style.display='none';">
                <div class="header-title">
                    <h1>üìä –î–∞—à–±–æ—Ä–¥</h1>
                </div>
            </div>
            <div class="header-actions">
                <div class="notifications-bell" id="notifications-bell" onclick="toggleNotifications()" title="–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è">
                    üîî
                    <span class="notifications-badge" id="notifications-badge" style="display:none;">0</span>
                </div>
                <a class="btn btn-primary" href="/admin/web/users">üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</a>
                <a class="btn btn-primary" href="/admin/web/payments">üí≥ –ü–ª–∞—Ç–µ–∂–∏</a>
                <a class="btn btn-primary" href="/admin/web/tickets">üßæ –¢–∏–∫–µ—Ç—ã</a>
                <a class="btn btn-primary" href="/admin/web/logs">üìã –õ–æ–≥–∏</a>
                <a class="btn btn-primary" href="/admin/web/settings">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</a>
                <a class="btn btn-primary" href="/admin/web/promo-codes">üéüÔ∏è –ü—Ä–æ–º–æ–∫–æ–¥—ã</a>
                <a class="btn btn-primary" href="/admin/web/subscription-plans">üì¶ –¢–∞—Ä–∏—Ñ—ã</a>
                <a class="btn btn-primary" href="/admin/web/backups">üíæ –ë—ç–∫–∞–ø—ã</a>
                <a class="btn btn-muted" href="/admin/logout">üö™ –í—ã–π—Ç–∏</a>
            </div>
        </div>
        
        <div class="content">
            <!-- –ê–ª–µ—Ä—Ç—ã -->
            {% if alerts %}
            <div class="section" style="margin-bottom: 20px;">
                {% for alert in alerts %}
                <div class="alert-banner {{ alert.type }}">
                    <div style="flex:1;">
                        <strong>{{ alert.title }}</strong>
                        <div style="margin-top:4px;">{{ alert.message }}</div>
                    </div>
                    {% if alert.link %}
                    <a href="{{ alert.link }}" class="btn btn-primary" style="text-decoration:none; padding:6px 12px; font-size:0.9em;">–ü–µ—Ä–µ–π—Ç–∏</a>
                    {% endif %}
                </div>
                {% endfor %}
            </div>
            {% endif %}
            
            <!-- –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
            <div class="stats-grid">
                <div class="stat-card">
                    <h3>{{ total_users }}</h3>
                    <p>–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</p>
                </div>
                <div class="stat-card secondary">
                    <h3>{{ total_active }}</h3>
                    <p>–ê–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</p>
                </div>
                <div class="stat-card success">
                    <h3>{{ "%.2f"|format(total_balance_rub) }} RUB</h3>
                    <p>–û–±—â–∏–π –±–∞–ª–∞–Ω—Å</p>
                </div>
                <div class="stat-card warning">
                    <h3>{{ active_subscriptions }}</h3>
                    <p>–ê–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–¥–ø–∏—Å–æ–∫</p>
                </div>
                <div class="stat-card">
                    <h3>{{ "%.2f"|format(total_revenue_rub) }} RUB</h3>
                    <p>–û–±—â–∞—è –≤—ã—Ä—É—á–∫–∞</p>
                </div>
                <div class="stat-card secondary">
                    <h3>{{ total_tickets }}</h3>
                    <p>–í—Å–µ–≥–æ —Ç–∏–∫–µ—Ç–æ–≤</p>
                </div>
            </div>
            
            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –ø–µ—Ä–∏–æ–¥–∞–º -->
            <div class="section">
                <h2 class="section-title">üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ –ø–µ—Ä–∏–æ–¥—ã</h2>
                
                <h3 style="margin: 20px 0 15px 0; color: #666;">–ù–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h3>
                <div class="period-stats">
                    <div class="period-card">
                        <h4>–°–µ–≥–æ–¥–Ω—è</h4>
                        <div class="value">{{ users_today }}</div>
                        <div class="label">–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
                    </div>
                    <div class="period-card">
                        <h4>–ó–∞ –Ω–µ–¥–µ–ª—é</h4>
                        <div class="value">{{ users_week }}</div>
                        <div class="label">–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
                    </div>
                    <div class="period-card">
                        <h4>–ó–∞ –º–µ—Å—è—Ü</h4>
                        <div class="value">{{ users_month }}</div>
                        <div class="label">–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
                    </div>
                </div>
                
                <h3 style="margin: 20px 0 15px 0; color: #666;">–ü–ª–∞—Ç–µ–∂–∏</h3>
                <div class="period-stats">
                    <div class="period-card">
                        <h4>–°–µ–≥–æ–¥–Ω—è</h4>
                        <div class="value">{{ payments_today }}</div>
                        <div class="label">–ø–ª–∞—Ç–µ–∂–µ–π</div>
                        <div class="value" style="font-size: 1.2em; margin-top: 5px;">{{ "%.2f"|format(revenue_today) }} RUB</div>
                    </div>
                    <div class="period-card">
                        <h4>–ó–∞ –Ω–µ–¥–µ–ª—é</h4>
                        <div class="value">{{ payments_week }}</div>
                        <div class="label">–ø–ª–∞—Ç–µ–∂–µ–π</div>
                        <div class="value" style="font-size: 1.2em; margin-top: 5px;">{{ "%.2f"|format(revenue_week) }} RUB</div>
                    </div>
                    <div class="period-card">
                        <h4>–ó–∞ –º–µ—Å—è—Ü</h4>
                        <div class="value">{{ payments_month }}</div>
                        <div class="label">–ø–ª–∞—Ç–µ–∂–µ–π</div>
                        <div class="value" style="font-size: 1.2em; margin-top: 5px;">{{ "%.2f"|format(revenue_month) }} RUB</div>
                    </div>
                </div>
                
                <h3 style="margin: 20px 0 15px 0; color: #666;">–¢–∏–∫–µ—Ç—ã</h3>
                <div class="period-stats">
                    <div class="period-card">
                        <h4>–°–µ–≥–æ–¥–Ω—è</h4>
                        <div class="value">{{ tickets_today }}</div>
                        <div class="label">—Ç–∏–∫–µ—Ç–æ–≤</div>
                    </div>
                    <div class="period-card">
                        <h4>–ó–∞ –Ω–µ–¥–µ–ª—é</h4>
                        <div class="value">{{ tickets_week }}</div>
                        <div class="label">—Ç–∏–∫–µ—Ç–æ–≤</div>
                    </div>
                    <div class="period-card">
                        <h4>–ó–∞ –º–µ—Å—è—Ü</h4>
                        <div class="value">{{ tickets_month }}</div>
                        <div class="label">—Ç–∏–∫–µ—Ç–æ–≤</div>
                    </div>
                </div>
            </div>
            
            <!-- –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
            <div class="section">
                <h2 class="section-title">üìä –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
                <div class="period-stats">
                    <div class="period-card">
                        <h4>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h4>
                        <div class="value">{{ total_active }}</div>
                        <div class="label">–∞–∫—Ç–∏–≤–Ω—ã—Ö / {{ total_blocked }} –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö</div>
                    </div>
                    <div class="period-card">
                        <h4>–ü–æ–¥–ø–∏—Å–∫–∏</h4>
                        <div class="value">{{ active_subscriptions }}</div>
                        <div class="label">–∞–∫—Ç–∏–≤–Ω—ã—Ö –∏–∑ {{ total_subscriptions }} –≤—Å–µ–≥–æ</div>
                    </div>
                    <div class="period-card">
                        <h4>–ü–ª–∞—Ç–µ–∂–∏</h4>
                        <div class="value">{{ succeeded_payments }}</div>
                        <div class="label">—É—Å–ø–µ—à–Ω—ã—Ö –∏–∑ {{ total_payments }} –≤—Å–µ–≥–æ</div>
                    </div>
                    <div class="period-card">
                        <h4>–¢–∏–∫–µ—Ç—ã</h4>
                        <div class="value">{{ new_tickets }}</div>
                        <div class="label">–Ω–æ–≤—ã—Ö / {{ in_progress_tickets }} –≤ —Ä–∞–±–æ—Ç–µ / {{ closed_tickets }} –∑–∞–∫—Ä—ã—Ç–æ</div>
                    </div>
                </div>
            </div>
            
            <!-- –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–æ–≤ -->
            {% if servers_status %}
            <div class="section">
                <h2 class="section-title">üñ•Ô∏è –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–æ–≤</h2>
                <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 15px;">
                    {% for server in servers_status %}
                    <div class="stat-card" style="{% if not server.is_online %}border: 2px solid #e74c3c;{% endif %}">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 10px;">
                            <h3 style="margin: 0; font-size: 1.1em;">{{ server.name }}</h3>
                            <span class="badge {% if server.is_online %}badge-success{% else %}badge-danger{% endif %}" style="font-size: 0.8em;">
                                {% if server.is_online %}üü¢ –û–Ω–ª–∞–π–Ω{% else %}üî¥ –û—Ñ–ª–∞–π–Ω{% endif %}
                            </span>
                        </div>
                        <p style="margin: 5px 0; color: #666; font-size: 0.9em;">
                            <strong>–•–æ—Å—Ç:</strong> {{ server.host }}<br>
                            <strong>–õ–æ–∫–∞—Ü–∏—è:</strong> {{ server.location }}<br>
                            {% if server.response_time_ms %}
                            <strong>–í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞:</strong> {{ server.response_time_ms }} –º—Å<br>
                            {% endif %}
                            <strong>–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–π:</strong> {{ server.active_connections }}{% if server.capacity %} / {{ server.capacity }}{% endif %}<br>
                            {% if server.checked_at %}
                            <strong>–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:</strong> {{ server.checked_at }}<br>
                            {% endif %}
                            {% if server.error_message %}
                            <span style="color: #e74c3c; font-size: 0.85em;">‚ö†Ô∏è {{ server.error_message }}</span>
                            {% endif %}
                        </p>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endif %}
            
            <!-- –ü–æ—Å–ª–µ–¥–Ω–∏–µ –±—ç–∫–∞–ø—ã -->
            <div class="section">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                    <h2 class="section-title">üíæ –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏</h2>
                    <div style="display: flex; gap: 10px;">
                        <button class="btn btn-success" onclick="createBackup()" style="padding: 8px 16px; font-size: 0.9em;">‚ûï –°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø</button>
                        <a href="/admin/web/backups" class="btn btn-primary" style="padding: 8px 16px; font-size: 0.9em;">–í—Å–µ –±—ç–∫–∞–ø—ã ‚Üí</a>
                    </div>
                </div>
                <div id="recent-backups" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 15px;">
                    <div style="text-align: center; color: #666; padding: 20px;">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                </div>
            </div>
            
            <!-- –¢–æ–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è -->
            <div class="two-columns">
                <div class="section">
                    <h2 class="section-title">üí∞ –¢–æ–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ –±–∞–ª–∞–Ω—Å—É</h2>
                    <table>
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Username</th>
                                <th>–ë–∞–ª–∞–Ω—Å</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% if top_users %}
                            {% for user in top_users %}
                            <tr>
                                <td><a href="/admin/web/users/{{ user.tg_id }}" style="color:#667eea; text-decoration:none;">{{ user.tg_id }}</a></td>
                                <td>{{ user.username }}</td>
                                <td><strong>{{ "%.2f"|format(user.balance) }} RUB</strong></td>
                            </tr>
                            {% endfor %}
                            {% else %}
                            <tr>
                                <td colspan="3" style="text-align:center; color:#666;">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö</td>
                            </tr>
                            {% endif %}
                        </tbody>
                    </table>
                </div>
                
                <div class="section">
                    <h2 class="section-title">üïê –ü–æ—Å–ª–µ–¥–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è</h2>
                    <table>
                        <thead>
                            <tr>
                                <th>–î–µ–π—Å—Ç–≤–∏–µ</th>
                                <th>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</th>
                                <th>–í—Ä–µ–º—è</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% if recent_logs %}
                            {% for log in recent_logs %}
                            <tr>
                                <td>
                                    <span class="badge badge-info">{{ log.action }}</span>
                                </td>
                                <td>
                                    {% if log.user_tg_id %}
                                    <a href="/admin/web/users/{{ log.user_tg_id }}" style="color:#667eea; text-decoration:none;">{{ log.user_tg_id }}</a>
                                    {% else %}‚Äî{% endif %}
                                </td>
                                <td>{{ log.created_at }}</td>
                            </tr>
                            {% endfor %}
                            {% else %}
                            <tr>
                                <td colspan="3" style="text-align:center; color:#666;">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö</td>
                            </tr>
                            {% endif %}
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- –ì—Ä–∞—Ñ–∏–∫–∏ -->
            <div class="section">
                <h2 class="section-title">üìà –ì—Ä–∞—Ñ–∏–∫–∏ –∏ —Ç—Ä–µ–Ω–¥—ã</h2>
                <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(500px, 1fr)); gap:20px;">
                    <div class="chart-container">
                        <h3>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h3>
                        <canvas id="registrations-chart"></canvas>
                    </div>
                    <div class="chart-container">
                        <h3>–ü–ª–∞—Ç–µ–∂–∏ –∏ –≤—ã—Ä—É—á–∫–∞</h3>
                        <canvas id="payments-chart"></canvas>
                    </div>
                    <div class="chart-container">
                        <h3>–°–æ–∑–¥–∞–Ω–∏–µ —Ç–∏–∫–µ—Ç–æ–≤</h3>
                        <canvas id="tickets-chart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π -->
    <div class="notification-overlay" id="notifications-overlay">
        <div class="notification-modal">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
                <h2 style="margin:0;">üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h2>
                <button class="btn btn-muted" onclick="toggleNotifications()" style="padding:6px 12px;">‚úï –ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
            <div id="notifications-container">
                <div style="text-align:center; color:#666; padding:20px;">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            </div>
        </div>
    </div>
    
    <script>
        // –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
        let notificationsData = { notifications: [], alerts: [], unread_count: 0 };
        
        function loadNotifications() {
            fetch('/admin/web/api/notifications')
                .then(res => res.json())
                .then(data => {
                    notificationsData = data;
                    updateNotificationsUI();
                })
                .catch(err => console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:', err));
        }
        
        function updateNotificationsUI() {
            const badge = document.getElementById('notifications-badge');
            if (notificationsData.unread_count > 0) {
                badge.textContent = notificationsData.unread_count > 99 ? '99+' : notificationsData.unread_count;
                badge.style.display = 'block';
            } else {
                badge.style.display = 'none';
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            const container = document.getElementById('notifications-container');
            if (container) {
                container.innerHTML = '';
                
                // –ê–ª–µ—Ä—Ç—ã
                if (notificationsData.alerts && notificationsData.alerts.length > 0) {
                    const alertsDiv = document.createElement('div');
                    alertsDiv.style.marginBottom = '20px';
                    notificationsData.alerts.forEach(alert => {
                        const alertEl = document.createElement('div');
                        alertEl.className = `alert-banner ${alert.type}`;
                        alertEl.innerHTML = `
                            <strong>${alert.title}</strong>
                            <div>${alert.message}</div>
                        `;
                        alertsDiv.appendChild(alertEl);
                    });
                    container.appendChild(alertsDiv);
                }
                
                // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
                if (notificationsData.notifications && notificationsData.notifications.length > 0) {
                    notificationsData.notifications.forEach(notif => {
                        const notifEl = document.createElement('div');
                        notifEl.className = `notification-item ${notif.severity}`;
                        notifEl.innerHTML = `
                            <div style="display:flex; justify-content:space-between; align-items:start;">
                                <div>
                                    <strong>${notif.title}</strong>
                                    <div style="margin-top:4px; color:#666; font-size:0.9em;">${notif.message}</div>
                                </div>
                                ${notif.count ? `<span style="background:#667eea; color:white; padding:2px 8px; border-radius:10px; font-size:0.8em;">${notif.count}</span>` : ''}
                            </div>
                            ${notif.link ? `<a href="${notif.link}" style="display:inline-block; margin-top:8px; color:#667eea; text-decoration:none; font-size:0.9em;">–ü–µ—Ä–µ–π—Ç–∏ ‚Üí</a>` : ''}
                        `;
                        container.appendChild(notifEl);
                    });
                } else if (notificationsData.alerts.length === 0) {
                    container.innerHTML = '<div style="text-align:center; color:#666; padding:20px;">–ù–µ—Ç –Ω–æ–≤—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</div>';
                }
            }
        }
        
        function toggleNotifications() {
            const overlay = document.getElementById('notifications-overlay');
            if (overlay) {
                overlay.classList.toggle('show');
                if (overlay.classList.contains('show')) {
                    loadNotifications();
                }
            }
        }
        
        // –ó–∞–≥—Ä—É–∂–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        loadNotifications();
        
        // –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
        setInterval(loadNotifications, 30000);
        
        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
        document.addEventListener('click', (e) => {
            const overlay = document.getElementById('notifications-overlay');
            if (overlay && e.target === overlay) {
                overlay.classList.remove('show');
            }
        });
        
        // –ì—Ä–∞—Ñ–∏–∫–∏
        let charts = {};
        
        function loadCharts() {
            if (typeof Chart === 'undefined') {
                console.warn('Chart.js –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω');
                return;
            }
            
            fetch('/admin/web/api/dashboard/stats?days=30')
                .then(res => res.json())
                .then(data => {
                    // –ì—Ä–∞—Ñ–∏–∫ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π
                    const regCtx = document.getElementById('registrations-chart');
                    if (regCtx && !charts.registrations) {
                        charts.registrations = new Chart(regCtx, {
                            type: 'line',
                            data: {
                                labels: data.registrations.map(r => r.date),
                                datasets: [{
                                    label: '–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π',
                                    data: data.registrations.map(r => r.count),
                                    borderColor: '#667eea',
                                    backgroundColor: 'rgba(102, 126, 234, 0.1)',
                                    tension: 0.4,
                                    fill: true
                                }]
                            },
                            options: {
                                responsive: true,
                                maintainAspectRatio: true,
                                aspectRatio: 2,
                                plugins: {
                                    legend: { display: false }
                                }
                            }
                        });
                    } else if (charts.registrations) {
                        charts.registrations.data.labels = data.registrations.map(r => r.date);
                        charts.registrations.data.datasets[0].data = data.registrations.map(r => r.count);
                        charts.registrations.update();
                    }
                    
                    // –ì—Ä–∞—Ñ–∏–∫ –ø–ª–∞—Ç–µ–∂–µ–π
                    const payCtx = document.getElementById('payments-chart');
                    if (payCtx && !charts.payments) {
                        charts.payments = new Chart(payCtx, {
                            type: 'bar',
                            data: {
                                labels: data.payments.map(p => p.date),
                                datasets: [
                                    {
                                        label: '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–ª–∞—Ç–µ–∂–µ–π',
                                        data: data.payments.map(p => p.count),
                                        backgroundColor: 'rgba(102, 126, 234, 0.6)',
                                        yAxisID: 'y'
                                    },
                                    {
                                        label: '–í—ã—Ä—É—á–∫–∞ (RUB)',
                                        data: data.payments.map(p => p.revenue),
                                        type: 'line',
                                        borderColor: '#28a745',
                                        backgroundColor: 'rgba(40, 167, 69, 0.1)',
                                        yAxisID: 'y1',
                                        tension: 0.4
                                    }
                                ]
                            },
                            options: {
                                responsive: true,
                                maintainAspectRatio: true,
                                aspectRatio: 2,
                                scales: {
                                    y: {
                                        type: 'linear',
                                        position: 'left',
                                        title: { display: true, text: '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ' }
                                    },
                                    y1: {
                                        type: 'linear',
                                        position: 'right',
                                        title: { display: true, text: 'RUB' },
                                        grid: { drawOnChartArea: false }
                                    }
                                }
                            }
                        });
                    } else if (charts.payments) {
                        charts.payments.data.labels = data.payments.map(p => p.date);
                        charts.payments.data.datasets[0].data = data.payments.map(p => p.count);
                        charts.payments.data.datasets[1].data = data.payments.map(p => p.revenue);
                        charts.payments.update();
                    }
                    
                    // –ì—Ä–∞—Ñ–∏–∫ —Ç–∏–∫–µ—Ç–æ–≤
                    const tickCtx = document.getElementById('tickets-chart');
                    if (tickCtx && !charts.tickets) {
                        charts.tickets = new Chart(tickCtx, {
                            type: 'line',
                            data: {
                                labels: data.tickets.map(t => t.date),
                                datasets: [{
                                    label: '–¢–∏–∫–µ—Ç–æ–≤ —Å–æ–∑–¥–∞–Ω–æ',
                                    data: data.tickets.map(t => t.count),
                                    borderColor: '#ffc107',
                                    backgroundColor: 'rgba(255, 193, 7, 0.1)',
                                    tension: 0.4,
                                    fill: true
                                }]
                            },
                            options: {
                                responsive: true,
                                maintainAspectRatio: true,
                                aspectRatio: 2,
                                plugins: {
                                    legend: { display: false }
                                }
                            }
                        });
                    } else if (charts.tickets) {
                        charts.tickets.data.labels = data.tickets.map(t => t.date);
                        charts.tickets.data.datasets[0].data = data.tickets.map(t => t.count);
                        charts.tickets.update();
                    }
                })
                .catch(err => console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≥—Ä–∞—Ñ–∏–∫–æ–≤:', err));
        }
        
        // –ó–∞–≥—Ä—É–∂–∞–µ–º –≥—Ä–∞—Ñ–∏–∫–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', loadCharts);
        } else {
            loadCharts();
        }
        
        // –°–∫—Ä—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ—Å–ª–µ –ø–æ–ª–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        (function() {
            const loadingOverlay = document.getElementById('loading-overlay');
            
            function hideOverlay() {
                if (loadingOverlay) {
                        loadingOverlay.classList.remove('show');
                    document.body.classList.remove('loading');
                }
            }
            
            // –°–∫—Ä—ã–≤–∞–µ–º —Å—Ä–∞–∑—É, –µ—Å–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω–∞
            if (document.readyState === 'complete') {
                setTimeout(hideOverlay, 100);
            } else {
                // –°–∫—Ä—ã–≤–∞–µ–º –ø–æ—Å–ª–µ DOMContentLoaded
                if (document.readyState === 'loading') {
                    document.addEventListener('DOMContentLoaded', function() {
                        setTimeout(hideOverlay, 100);
                    });
                }
                
                window.addEventListener('load', function() {
                    setTimeout(hideOverlay, 100);
                });
            }
            
            // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –Ω–∞–≤–∏–≥–∞—Ü–∏—é –Ω–∞–∑–∞–¥/–≤–ø–µ—Ä–µ–¥ (–∫–æ–≥–¥–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ –∫—ç—à–∞)
            window.addEventListener('pageshow', function(event) {
                // –ï—Å–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –∏–∑ –∫—ç—à–∞ (back/forward navigation)
                if (event.persisted) {
                    hideOverlay();
                    }
                });
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞—Ö
            document.addEventListener('DOMContentLoaded', function() {
                const links = document.querySelectorAll('a[href^="/admin/web"]');
                
                links.forEach(link => {
                    link.addEventListener('click', function(e) {
                        // –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –æ–≤–µ—Ä–ª–µ–π –¥–ª—è —Å—Å—ã–ª–æ–∫ –Ω–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ
                        if (this.hasAttribute('download') || this.target === '_blank' || this.href.includes('/download')) {
                            // –°–∫—Ä—ã–≤–∞–µ–º –æ–≤–µ—Ä–ª–µ–π –µ—Å–ª–∏ –æ–Ω –±—ã–ª –ø–æ–∫–∞–∑–∞–Ω
                            if (loadingOverlay) {
                                loadingOverlay.classList.remove('show');
                                document.body.classList.remove('loading');
                            }
                            return;
                        }
                        if (loadingOverlay) {
                            loadingOverlay.classList.add('show');
                            document.body.classList.add('loading');
                        }
                    });
                });
                
                // –°–∫—Ä—ã–≤–∞–µ–º –æ–≤–µ—Ä–ª–µ–π –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —Å—Å—ã–ª–∫–∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
                document.querySelectorAll('a[href*="/download"]').forEach(link => {
                    link.addEventListener('click', function(e) {
                        // –°—Ä–∞–∑—É —Å–∫—Ä—ã–≤–∞–µ–º –æ–≤–µ—Ä–ª–µ–π –ø—Ä–∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏–∏
                            if (loadingOverlay) {
                                loadingOverlay.classList.remove('show');
                            document.body.classList.remove('loading');
                            }
                    });
                });
            });
        })();
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –±—ç–∫–∞–ø–æ–≤
        function loadRecentBackups() {
            fetch('/admin/web/backups?limit=5')
                .then(res => res.text())
                .then(html => {
                    // –ü–∞—Ä—Å–∏–º HTML –∏ –∏–∑–≤–ª–µ–∫–∞–µ–º —Å–ø–∏—Å–æ–∫ –±—ç–∫–∞–ø–æ–≤
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(html, 'text/html');
                    const backupsTable = doc.querySelector('table tbody');
                    if (backupsTable) {
                        const backups = Array.from(backupsTable.querySelectorAll('tr')).slice(0, 5);
                        const container = document.getElementById('recent-backups');
                        if (container) {
                            if (backups.length === 0) {
                                container.innerHTML = '<div style="text-align: center; color: #666; padding: 20px;">–ù–µ—Ç –±—ç–∫–∞–ø–æ–≤</div>';
                                return;
                            }
                            container.innerHTML = '';
                            backups.forEach(backupRow => {
                                const cells = backupRow.querySelectorAll('td');
                                if (cells.length >= 4) {
                                    const type = cells[0].textContent.trim();
                                    const size = cells[2].textContent.trim();
                                    const status = cells[3].textContent.trim();
                                    const downloadLink = backupRow.querySelector('a[href*="/download"]');
                                    const backupId = downloadLink ? downloadLink.href.match(/\/backups\/(\d+)\/download/)?.[1] : null;
                                    
                                    const card = document.createElement('div');
                                    card.style.cssText = 'background: white; border-radius: 8px; padding: 15px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);';
                                    card.innerHTML = `
                                        <div style="font-weight: 600; margin-bottom: 8px;">${type}</div>
                                        <div style="color: #666; font-size: 0.9em; margin-bottom: 8px;">–†–∞–∑–º–µ—Ä: ${size}</div>
                                        <div style="margin-bottom: 10px;">
                                            <span class="badge ${status === 'completed' ? 'badge-success' : status === 'in_progress' ? 'badge-warning' : 'badge-danger'}">${status}</span>
                                        </div>
                                        ${backupId && status === 'completed' ? `<a href="/admin/web/backups/${backupId}/download" class="btn btn-primary download-link" style="padding:6px 12px; font-size:0.85em; margin-top:10px; display:inline-block; text-decoration:none; width:100%; text-align:center;">‚¨áÔ∏è –°–∫–∞—á–∞—Ç—å</a>` : ''}
                                    `;
                                    container.appendChild(card);
                                }
                            });
                        }
                    }
                })
                .catch(err => {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –±—ç–∫–∞–ø–æ–≤:', err);
                    const container = document.getElementById('recent-backups');
                    if (container) {
                        container.innerHTML = '<div style="text-align: center; color: #e74c3c; padding: 20px;">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</div>';
                    }
                });
        }
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤ - –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —Å—Å—ã–ª–æ–∫
        document.addEventListener('click', function(e) {
            const target = e.target.closest('a[href*="/download"]');
            if (target) {
            const loadingOverlay = document.getElementById('loading-overlay');
                // –°—Ä–∞–∑—É —Å–∫—Ä—ã–≤–∞–µ–º –æ–≤–µ—Ä–ª–µ–π –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —Å—Å—ã–ª–∫—É —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
                if (loadingOverlay) {
                    loadingOverlay.classList.remove('show');
                    document.body.classList.remove('loading');
                }
        }
        });
        
        // –°–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞
        function createBackup() {
            const loadingOverlay = document.getElementById('loading-overlay');
            if (loadingOverlay) {
                loadingOverlay.classList.add('show');
                document.body.classList.add('loading');
            }
            
            // –ü–æ–ª—É—á–∞–µ–º CSRF —Ç–æ–∫–µ–Ω –∏–∑ —Å–∫—Ä—ã—Ç–æ–≥–æ –ø–æ–ª—è –∏–ª–∏ –º–µ—Ç–∞-—Ç–µ–≥–∞
            let csrfToken = '';
            const csrfInput = document.querySelector('input[name="csrf_token"]');
            const csrfMeta = document.querySelector('meta[name="csrf-token"]');
            if (csrfInput) {
                csrfToken = csrfInput.value;
            } else if (csrfMeta) {
                csrfToken = csrfMeta.content;
            }
            
            fetch('/admin/web/backups/create', {
                method: 'POST',
                headers: {
                    'X-CSRF-Token': csrfToken
                },
                redirect: 'follow'
            })
            .then(res => {
                if (loadingOverlay) {
                    loadingOverlay.classList.remove('show');
                    document.body.classList.remove('loading');
                }
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–¥–∏—Ä–µ–∫—Ç –∏–ª–∏ —É—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç
                if (res.redirected || res.ok) {
                    // –ï—Å–ª–∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç, –ø–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ –Ω–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
                    if (res.redirected) {
                        window.location.href = res.url;
                    } else {
                    alert('–ë—ç–∫–∞–ø —Å–æ–∑–¥–∞–µ—Ç—Å—è. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥.');
                    setTimeout(() => {
                        loadRecentBackups();
                    }, 2000);
                    }
                } else {
                    return res.json().then(data => {
                        alert('–û—à–∏–±–∫–∞: ' + (data.detail || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞'));
                    }).catch(() => {
                        alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –±—ç–∫–∞–ø–∞');
                    });
                }
            })
            .catch(err => {
                if (loadingOverlay) {
                    loadingOverlay.classList.remove('show');
                    document.body.classList.remove('loading');
                }
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –±—ç–∫–∞–ø–∞:', err);
                alert('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –±—ç–∫–∞–ø–∞.');
            });
        }
        
        // –ó–∞–≥—Ä—É–∂–∞–µ–º –±—ç–∫–∞–ø—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        loadRecentBackups();
        setInterval(loadRecentBackups, 60000);
    </script>
</body>
</html>

