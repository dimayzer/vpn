#!/bin/bash
set -e

# SSH-—Ç—É–Ω–Ω–µ–ª—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω –Ω–∞ —Ö–æ—Å—Ç–µ, –∞ –Ω–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
# –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Ç—É–Ω–Ω–µ–ª—è —á–µ—Ä–µ–∑ host.docker.internal
echo "üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ SSH-—Ç—É–Ω–Ω–µ–ª—è —á–µ—Ä–µ–∑ host.docker.internal:38868..."
if curl -s --connect-timeout 2 http://host.docker.internal:38868 > /dev/null 2>&1; then
    echo "‚úÖ SSH-—Ç—É–Ω–Ω–µ–ª—å –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ host.docker.internal:38868"
else
    echo "‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ: SSH-—Ç—É–Ω–Ω–µ–ª—å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ host.docker.internal:38868"
    echo "‚ÑπÔ∏è –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ SSH-—Ç—É–Ω–Ω–µ–ª—å –∑–∞–ø—É—â–µ–Ω –Ω–∞ —Ö–æ—Å—Ç–µ –∏ —Å–ª—É—à–∞–µ—Ç –Ω–∞ 0.0.0.0:38868"
    echo "‚ÑπÔ∏è –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –Ω–∞ —Ö–æ—Å—Ç–µ:"
    echo "   ssh -N -L 0.0.0.0:38868:127.0.0.1:38868 -i ~/fiorevpn/ssh/x3ui_key root@62.133.60.47"
fi

# –ó–∞–ø—É—Å–∫–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
exec "$@"

